<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1800" height="1000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <!-- Define styles -->
  <defs>
    <!-- Gradient definitions -->
    <linearGradient id="gradBlue" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2E5C8A;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="gradGreen" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#7ED321;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5FA319;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="gradOrange" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9500;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#CC7700;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="gradRed" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E74C3C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C0392B;stop-opacity:1" />
    </linearGradient>

    <!-- Arrow marker -->
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4A90E2" />
    </marker>

    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#7ED321" />
    </marker>

    <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#FF9500" />
    </marker>

    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#E74C3C" />
    </marker>

    <!-- Shadow filter -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1800" height="1000" fill="#F8F9FA"/>

  <!-- Title -->
  <text x="900" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    CrysMMNet: Cross-Modal Multi-Modal Network Architecture
  </text>

  <!-- ========== INPUT SECTION ========== -->

  <!-- Crystal Structure Input -->
  <rect x="50" y="450" width="120" height="80" rx="8" fill="url(#gradBlue)" filter="url(#shadow)"/>
  <text x="110" y="480" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Crystal</text>
  <text x="110" y="500" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Structure</text>
  <text x="110" y="520" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#E8F4F8">(CIF)</text>

  <!-- Text Input -->
  <rect x="50" y="150" width="120" height="80" rx="8" fill="url(#gradGreen)" filter="url(#shadow)"/>
  <text x="110" y="180" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Text</text>
  <text x="110" y="200" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Description</text>
  <text x="110" y="220" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8F8E8">"Material desc..."</text>

  <!-- ========== TEXT ENCODING BRANCH ========== -->

  <!-- Arrow from Text to MatSciBERT -->
  <line x1="170" y1="190" x2="220" y2="190" stroke="#7ED321" stroke-width="3" marker-end="url(#arrowGreen)"/>

  <!-- MatSciBERT -->
  <rect x="220" y="150" width="140" height="80" rx="8" fill="#95A5A6" stroke="#7F8C8D" stroke-width="2" filter="url(#shadow)"/>
  <text x="290" y="175" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">MatSciBERT</text>
  <text x="290" y="195" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">ğŸ”’ Frozen</text>
  <text x="290" y="215" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8E8E8">[B, L, 768]</text>

  <!-- Arrow to CLS + Projection -->
  <line x1="360" y1="190" x2="410" y2="190" stroke="#7ED321" stroke-width="3" marker-end="url(#arrowGreen)"/>

  <!-- CLS Token + Projection -->
  <rect x="410" y="150" width="110" height="80" rx="8" fill="url(#gradGreen)" filter="url(#shadow)"/>
  <text x="465" y="175" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">CLS Token</text>
  <text x="465" y="195" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">+</text>
  <text x="465" y="215" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Projection</text>
  <text x="465" y="228" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8F8E8">768â†’64</text>

  <!-- Arrow to text_emb -->
  <line x1="520" y1="190" x2="570" y2="190" stroke="#7ED321" stroke-width="3" marker-end="url(#arrowGreen)"/>

  <!-- text_emb box -->
  <rect x="570" y="160" width="100" height="60" rx="8" fill="#7ED321" stroke="#5FA319" stroke-width="2" filter="url(#shadow)"/>
  <text x="620" y="183" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">text_emb</text>
  <text x="620" y="203" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">[B, 64]</text>

  <!-- Dashed line from text_emb to Middle Fusion (waiting) -->
  <line x1="620" y1="220" x2="620" y2="410" stroke="#7ED321" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="635" y="315" font-family="Arial, sans-serif" font-size="10" fill="#5FA319" transform="rotate(90 635 315)">Waiting...</text>

  <!-- Arrow from text_emb to Late Fusion -->
  <line x1="670" y1="190" x2="1400" y2="190" stroke="#7ED321" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="1400" y1="190" x2="1400" y2="360" stroke="#7ED321" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowGreen)"/>

  <!-- text_tokens branch (for fine-grained) -->
  <rect x="410" y="250" width="110" height="50" rx="6" fill="#A8E6CF" stroke="#7ED321" stroke-width="2"/>
  <text x="465" y="270" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#2C5530">text_tokens</text>
  <text x="465" y="290" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2C5530">[B, L, 768]</text>
  <line x1="360" y1="210" x2="380" y2="230" stroke="#7ED321" stroke-width="2"/>
  <line x1="380" y1="230" x2="410" y2="275" stroke="#7ED321" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- ========== GRAPH ENCODING BRANCH ========== -->

  <!-- Arrow from Structure to Init -->
  <line x1="170" y1="490" x2="220" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- Initial Embedding -->
  <rect x="220" y="450" width="110" height="80" rx="8" fill="url(#gradBlue)" filter="url(#shadow)"/>
  <text x="275" y="473" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Init Embed</text>
  <text x="275" y="493" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8F4F8">x: [N, 256]</text>
  <text x="275" y="508" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8F4F8">y: [E, 256]</text>
  <text x="275" y="523" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8F4F8">z: [T, 256]</text>

  <!-- Arrow to ALIGNN Layer 0 -->
  <line x1="330" y1="490" x2="360" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ALIGNN Layer 0 -->
  <rect x="360" y="460" width="90" height="60" rx="6" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2" filter="url(#shadow)"/>
  <text x="405" y="483" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">ALIGNN</text>
  <text x="405" y="503" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Layer 0</text>

  <!-- Arrow -->
  <line x1="450" y1="490" x2="480" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ALIGNN Layer 1 -->
  <rect x="480" y="460" width="90" height="60" rx="6" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2" filter="url(#shadow)"/>
  <text x="525" y="483" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">ALIGNN</text>
  <text x="525" y="503" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Layer 1</text>

  <!-- Arrow -->
  <line x1="570" y1="490" x2="600" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ALIGNN Layer 2 -->
  <rect x="600" y="460" width="90" height="60" rx="6" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2" filter="url(#shadow)"/>
  <text x="645" y="483" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">ALIGNN</text>
  <text x="645" y="503" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Layer 2</text>

  <!-- Arrow to Middle Fusion -->
  <line x1="690" y1="490" x2="720" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ========== MIDDLE FUSION (INNOVATION 1) ========== -->

  <!-- Middle Fusion Box -->
  <rect x="720" y="410" width="150" height="160" rx="8" fill="url(#gradOrange)" stroke="#CC7700" stroke-width="3" filter="url(#shadow)"/>
  <text x="795" y="430" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">ğŸ”¥ Middle Fusion</text>
  <text x="795" y="448" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#FFF5E6">Innovation 1 â­</text>

  <!-- Internal steps -->
  <text x="795" y="470" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">1. Transform text</text>
  <text x="795" y="488" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">64â†’128â†’256</text>
  <text x="795" y="510" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">2. Broadcast</text>
  <text x="795" y="528" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">[B,256]â†’[N,256]</text>
  <text x="795" y="548" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">3. Gate: Ïƒ(W[xâŠ•t])</text>
  <text x="795" y="565" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">4. Fusion: x+gateâŠ™t</text>

  <!-- Arrow from text_emb to Middle Fusion -->
  <line x1="620" y1="410" x2="720" y2="450" stroke="#7ED321" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- Arrow from Middle Fusion to ALIGNN Layer 3 -->
  <line x1="870" y1="490" x2="900" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ALIGNN Layer 3 -->
  <rect x="900" y="460" width="90" height="60" rx="6" fill="#5DADE2" stroke="#2E5C8A" stroke-width="2" filter="url(#shadow)"/>
  <text x="945" y="483" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">ALIGNN</text>
  <text x="945" y="503" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Layer 3</text>

  <!-- Label for fused features -->
  <text x="945" y="540" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2E5C8A">Using fused features</text>

  <!-- Arrow to GCN -->
  <line x1="990" y1="490" x2="1020" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ========== GCN LAYERS ========== -->

  <!-- GCN Layers Box -->
  <rect x="1020" y="440" width="110" height="100" rx="8" fill="#3498DB" stroke="#2E5C8A" stroke-width="2" filter="url(#shadow)"/>
  <text x="1075" y="463" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">GCN Layers</text>
  <text x="1075" y="483" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#E8F4F8">(4 layers)</text>
  <line x1="1040" y1="495" x2="1110" y2="495" stroke="white" stroke-width="1"/>
  <text x="1075" y="510" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">GCN-0 â†’</text>
  <text x="1075" y="525" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">GCN-1,2,3</text>

  <!-- Arrow to Fine-Grained -->
  <line x1="1130" y1="490" x2="1160" y2="490" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ========== FINE-GRAINED ATTENTION (INNOVATION 2) ========== -->

  <!-- Fine-Grained Box -->
  <rect x="1160" y="380" width="170" height="220" rx="8" fill="url(#gradOrange)" stroke="#CC7700" stroke-width="3" filter="url(#shadow)"/>
  <text x="1245" y="403" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">ğŸ” Fine-Grained</text>
  <text x="1245" y="420" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Attention</text>
  <text x="1245" y="437" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#FFF5E6">Innovation 2 â­ (Optional)</text>

  <!-- Input boxes inside -->
  <rect x="1175" y="450" width="60" height="35" rx="4" fill="#4A90E2" stroke="#2E5C8A" stroke-width="1"/>
  <text x="1205" y="467" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Nodes</text>
  <text x="1205" y="480" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#E8F4F8">[B,M,256]</text>

  <rect x="1255" y="450" width="60" height="35" rx="4" fill="#7ED321" stroke="#5FA319" stroke-width="1"/>
  <text x="1285" y="467" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Tokens</text>
  <text x="1285" y="480" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#E8F8E8">[B,L,768]</text>

  <!-- Attention mechanism -->
  <ellipse cx="1245" cy="520" rx="50" ry="25" fill="#FFD700" stroke="#FFA500" stroke-width="2"/>
  <text x="1245" y="520" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#8B4513">Multi-Head</text>
  <text x="1245" y="533" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#8B4513">Attention</text>

  <!-- Bidirectional arrows -->
  <line x1="1205" y1="485" x2="1205" y2="495" stroke="#4A90E2" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <line x1="1285" y1="485" x2="1285" y2="495" stroke="#7ED321" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- Outputs -->
  <rect x="1180" y="555" width="55" height="30" rx="4" fill="#5DADE2" stroke="#2E5C8A" stroke-width="1"/>
  <text x="1207" y="572" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Enhanced</text>
  <text x="1207" y="583" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Nodes</text>

  <rect x="1250" y="555" width="55" height="30" rx="4" fill="#A8E6CF" stroke="#7ED321" stroke-width="1"/>
  <text x="1277" y="572" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Enhanced</text>
  <text x="1277" y="583" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Tokens</text>

  <!-- Arrow from text_tokens to Fine-Grained -->
  <line x1="520" y1="275" x2="1160" y2="467" stroke="#7ED321" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowGreen)"/>

  <!-- Arrow from Fine-Grained to Readout -->
  <line x1="1245" y1="555" x2="1245" y2="615" stroke="#4A90E2" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ========== READOUT ========== -->

  <!-- Readout -->
  <ellipse cx="1245" cy="670" rx="70" ry="40" fill="#9B59B6" stroke="#7D3C98" stroke-width="2" filter="url(#shadow)"/>
  <text x="1245" y="665" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Readout</text>
  <text x="1245" y="683" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8E8F8">(Mean Pooling)</text>

  <!-- Arrow to Projection -->
  <line x1="1245" y1="710" x2="1245" y2="740" stroke="#9B59B6" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- Projection -->
  <rect x="1190" y="740" width="110" height="50" rx="6" fill="#8E44AD" stroke="#7D3C98" stroke-width="2" filter="url(#shadow)"/>
  <text x="1245" y="760" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Graph Projection</text>
  <text x="1245" y="778" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#E8E8F8">256 â†’ 64</text>

  <!-- Arrow to Late Fusion -->
  <line x1="1300" y1="765" x2="1370" y2="765" stroke="#9B59B6" stroke-width="3"/>
  <line x1="1370" y1="765" x2="1370" y2="440" stroke="#9B59B6" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- ========== LATE FUSION (CROSS-MODAL ATTENTION) ========== -->

  <!-- Late Fusion Box -->
  <rect x="1370" y="360" width="180" height="140" rx="8" fill="url(#gradRed)" stroke="#C0392B" stroke-width="3" filter="url(#shadow)"/>
  <text x="1460" y="383" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">ğŸ”— Late Fusion</text>
  <text x="1460" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#FFE8E8">Cross-Modal Attention</text>

  <!-- Inputs -->
  <rect x="1385" y="415" width="65" height="25" rx="4" fill="#8E44AD" stroke="#7D3C98" stroke-width="1"/>
  <text x="1417" y="432" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Graph [B,64]</text>

  <rect x="1470" y="415" width="65" height="25" rx="4" fill="#7ED321" stroke="#5FA319" stroke-width="1"/>
  <text x="1502" y="432" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Text [B,64]</text>

  <!-- Attention icon -->
  <circle cx="1460" cy="458" r="15" fill="#FFD700" stroke="#FFA500" stroke-width="2"/>
  <text x="1460" y="463" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#8B4513">âŠ—</text>

  <!-- Fusion -->
  <text x="1460" y="478" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Average Fusion:</text>
  <text x="1460" y="493" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">(enhanced_g + enhanced_t) / 2</text>

  <!-- Arrow to Prediction -->
  <line x1="1550" y1="430" x2="1580" y2="430" stroke="#E74C3C" stroke-width="3" marker-end="url(#arrowRed)"/>

  <!-- ========== PREDICTION HEAD ========== -->

  <!-- FC Layers -->
  <rect x="1580" y="390" width="90" height="80" rx="8" fill="#34495E" stroke="#2C3E50" stroke-width="2" filter="url(#shadow)"/>
  <text x="1625" y="413" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">FC Layers</text>
  <text x="1625" y="433" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">Linear(64â†’64)</text>
  <text x="1625" y="448" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">ReLU</text>
  <text x="1625" y="463" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#BDC3C7">Linear(64â†’1)</text>

  <!-- Arrow to Output -->
  <line x1="1670" y1="430" x2="1700" y2="430" stroke="#34495E" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- Output -->
  <circle cx="1730" cy="430" r="35" fill="#27AE60" stroke="#229954" stroke-width="3" filter="url(#shadow)"/>
  <text x="1730" y="430" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Output</text>
  <text x="1730" y="448" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D5F4E6">Å·</text>

  <!-- ========== ANNOTATIONS ========== -->

  <!-- Innovation markers -->
  <text x="795" y="380" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#FF9500">â­ Innovation 1</text>
  <text x="1245" y="355" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#FF9500">â­ Innovation 2</text>

  <!-- Legend -->
  <rect x="50" y="850" width="700" height="120" rx="8" fill="white" stroke="#95A5A6" stroke-width="2" filter="url(#shadow)"/>
  <text x="400" y="875" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2C3E50">Pipeline Summary</text>

  <text x="70" y="900" font-family="Arial, sans-serif" font-size="11" fill="#2C3E50">
    <tspan x="70" dy="0">1. Text â†’ MatSciBERT (frozen) â†’ text_emb [B,64] + text_tokens [B,L,768]</tspan>
    <tspan x="70" dy="20">2. Graph â†’ ALIGNN(0-2) â†’ ğŸ”¥ Middle Fusion (text_emb injected) â†’ ALIGNN(3) â†’ GCN(0-3)</tspan>
    <tspan x="70" dy="20">3. ğŸ” Fine-Grained Attention: Atom-Word alignment (optional)</tspan>
    <tspan x="70" dy="20">4. Readout â†’ ğŸ”— Late Fusion (Cross-Modal Attention) â†’ FC â†’ Prediction</tspan>
  </text>

  <!-- Color Legend -->
  <rect x="850" y="850" width="350" height="120" rx="8" fill="white" stroke="#95A5A6" stroke-width="2" filter="url(#shadow)"/>
  <text x="1025" y="875" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2C3E50">Color Legend</text>

  <rect x="870" y="890" width="30" height="15" fill="#4A90E2"/>
  <text x="910" y="902" font-family="Arial, sans-serif" font-size="10" fill="#2C3E50">Graph Structure Path</text>

  <rect x="870" y="915" width="30" height="15" fill="#7ED321"/>
  <text x="910" y="927" font-family="Arial, sans-serif" font-size="10" fill="#2C3E50">Text Encoding Path</text>

  <rect x="870" y="940" width="30" height="15" fill="#FF9500"/>
  <text x="910" y="952" font-family="Arial, sans-serif" font-size="10" fill="#2C3E50">Fusion Modules (Innovations)</text>

  <rect x="1050" y="890" width="30" height="15" fill="#E74C3C"/>
  <text x="1090" y="902" font-family="Arial, sans-serif" font-size="10" fill="#2C3E50">Late Fusion</text>

  <rect x="1050" y="915" width="30" height="15" fill="#9B59B6"/>
  <text x="1090" y="927" font-family="Arial, sans-serif" font-size="10" fill="#2C3E50">Readout & Projection</text>

  <rect x="1050" y="940" width="30" height="15" fill="#95A5A6"/>
  <text x="1090" y="952" font-family="Arial, sans-serif" font-size="10" fill="#2C3E50">Frozen Module (MatSciBERT)</text>

</svg>
